{% extends "booking/menu_auth.html" %}
{% block en_tete%} 
{% load bootstrap5 %}

{% bootstrap_css %}
{% bootstrap_javascript %}

{% load static %}

{% endblock %}

{% block title %} Reservation {% endblock %}





<!-- Inclusion de l'API Google Maps -->




<!-- Inclusion du fichier JavaScript -->




{% block content %}
<a href="{% url 'reservations' %}" class="btn btn-secondary">Retour à mes reservations</a>
    {% if reservation %}
        <br> </br>
        <h2>{{reservation}}</h2>

        <table class = "table">
            <tr>
                <th>Reservation n° </th>
                <th>Date de reservation</th>
                <th>passager</th>
                <th>voiture</th>
                <th>place</th>
            </tr>
            <tr>
                <td>{{ reservation.numero_reservation }}</td>
                <td>{{ reservation.date_reservation }}</td>
                <td>{{ reservation.passager }}</td>
                <td>{{ reservation.numero_voiture }}</td>
                <td>{{ reservation.numero_place}}</td>
            </tr>
            <tr>
                <td> <a href="{% url 'modifier_reservation' reservation.numero_reservation %}" class="btn btn-primary btn-lg btn-block">Modifier</a></td>
                <td> <a href="{% url 'supprimer_reservation' reservation.numero_reservation %}" class="btn btn-danger btn-lg btn-block">Supprimer</a></td>
            </tr>
        </table>
    {% else %}
        <div class="alert alert-info" role="alert">
            Cette reservation n'existe pas.
        </div>
    {% endif %}

    <script src="{% static 'booking/gmaps/reservation.js' %}"></script>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC1l-MwdIRskm9NMrflRSYLyXsbysBv1vs&callback=initMap">
</script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var startLat = parseFloat('{{ gare_depart.position.latitude }}'.replace(',', '.'));
        var startLng = parseFloat('{{ gare_depart.position.longitude }}'.replace(',', '.'));
        var endLat = parseFloat('{{ gare_arrivee.position.latitude }}'.replace(',', '.'));
        var endLng = parseFloat('{{ gare_arrivee.position.longitude }}'.replace(',', '.'));
        initMap();
        calculateAndDisplayRoute({lat: startLat, lng: startLng}, {lat: endLat, lng: endLng});
    });
</script>

<div id="map" style="height: 400px; width: 100%;"></div>
{% endblock %}